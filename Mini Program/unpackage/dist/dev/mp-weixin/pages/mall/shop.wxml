<view class="mall-page data-v-14fdb568"><view class="header-fixed data-v-14fdb568"><view class="topbar data-v-14fdb568"><view data-event-opts="{{[['tap',[['goBack',['$event']]]]]}}" class="nav-left data-v-14fdb568" bindtap="__e"><text class="back-icon data-v-14fdb568">â†</text></view><view class="nav-center data-v-14fdb568"><text class="title data-v-14fdb568">è´­ç‰©ä¸­å¿ƒ</text></view><view class="nav-right data-v-14fdb568"></view></view><view class="search-bar data-v-14fdb568"><view class="search-input data-v-14fdb568"><text class="search-icon data-v-14fdb568">ğŸ”</text><input placeholder="æœç´¢ï¼šå“ç±» / é‡‰è‰² / äº§åœ° / åç§°" confirm-type="search" data-event-opts="{{[['confirm',[['onSearchConfirm',['$event']]]],['input',[['__set_model',['','searchQuery','$event',[]]]]]]}}" value="{{searchQuery}}" bindconfirm="__e" bindinput="__e" class="data-v-14fdb568"/><block wx:if="{{searchQuery}}"><view data-event-opts="{{[['tap',[['clearSearch',['$event']]]]]}}" class="clear-btn data-v-14fdb568" bindtap="__e">âœ•</view></block></view><scroll-view class="tabs-wrap data-v-14fdb568" scroll-x="{{true}}" scroll-with-animation="{{true}}"><block wx:for="{{tabs}}" wx:for-item="t" wx:for-index="i" wx:key="i"><view data-event-opts="{{[['tap',[['switchTab',['$0'],[[['tabs','',i,'key']]]]]]]}}" class="{{['tab','data-v-14fdb568',(activeTab===t.key)?'active':'']}}" bindtap="__e">{{''+t.name+''}}</view></block></scroll-view></view></view><view class="header-spacer data-v-14fdb568"></view><scroll-view class="grid-wrap data-v-14fdb568" scroll-y="{{true}}"><view class="grid data-v-14fdb568"><block wx:for="{{filteredProducts}}" wx:for-item="p" wx:for-index="idx" wx:key="idx"><view data-event-opts="{{[['tap',[['openDetail',['$0'],[[['filteredProducts','',idx]]]]]]]}}" class="card data-v-14fdb568" bindtap="__e"><image class="cover data-v-14fdb568" src="{{p.image}}" mode="aspectFill"></image><view class="info data-v-14fdb568"><text class="name data-v-14fdb568">{{p.name}}</text><text class="price data-v-14fdb568">{{p.priceText}}</text></view><view class="meta data-v-14fdb568"><text class="sold data-v-14fdb568">{{"å·²å”® "+p.soldText}}</text><block wx:if="{{p.tag}}"><text class="tag data-v-14fdb568">{{p.tag}}</text></block></view><view class="actions data-v-14fdb568"><view data-event-opts="{{[['tap',[['openAiPanel',['$0'],[[['filteredProducts','',idx]]]]]]]}}" class="ai-chip pulse data-v-14fdb568" catchtap="__e"><text class="spark data-v-14fdb568">âœ¦</text><text class="chip-text data-v-14fdb568">ç“·è¯­è§£æ</text></view></view></view></block></view><view class="pad-bottom data-v-14fdb568"></view></scroll-view><block wx:if="{{showAi}}"><view data-event-opts="{{[['tap',[['closeAiPanel',['$event']]]]]}}" class="mask data-v-14fdb568" bindtap="__e"><view data-event-opts="{{[['tap',[['',['$event']]]]]}}" class="ai-panel data-v-14fdb568" catchtap="__e"><view class="panel-header data-v-14fdb568"><view class="badge data-v-14fdb568"><text class="spark data-v-14fdb568">âœ¦</text><text class="data-v-14fdb568">AI ç“·è¯­è§£æ</text></view><view class="panel-title data-v-14fdb568"><text class="data-v-14fdb568">{{currentItem?currentItem.name:''}}</text></view></view><view class="panel-body data-v-14fdb568"><view class="ai-stage data-v-14fdb568"><block wx:if="{{phase==='thinking'}}"><view class="thinking data-v-14fdb568"><view class="spinner data-v-14fdb568"></view><text class="thinking-text data-v-14fdb568">AI ç“·è¯­æ€è€ƒä¸­</text><text class="dots data-v-14fdb568"><text class="dot d1 data-v-14fdb568">â€¢</text><text class="dot d2 data-v-14fdb568">â€¢</text><text class="dot d3 data-v-14fdb568">â€¢</text></text></view></block><block wx:else><view class="speaking data-v-14fdb568"><view class="speak-icon pulse-min data-v-14fdb568">ğŸ”Š</view><view class="typing-area data-v-14fdb568"><text class="typing data-v-14fdb568">{{storyDisplay}}</text><block wx:if="{{isTypingStory}}"><text class="cursor data-v-14fdb568">â–‹</text></block></view></view></block></view><view class="section data-v-14fdb568"><view class="section-title data-v-14fdb568"><view class="dot alt data-v-14fdb568"></view><text class="data-v-14fdb568">æ¥æº</text></view><view class="typing-area source data-v-14fdb568"><text class="typing data-v-14fdb568">{{sourceDisplay}}</text></view></view></view><view class="panel-actions data-v-14fdb568"><button data-event-opts="{{[['tap',[['toggleVoice',['$event']]]]]}}" class="btn ghost data-v-14fdb568" bindtap="__e">{{isPlaying?'æš‚åœè¯­éŸ³':'æ’­æ”¾è¯­éŸ³'}}</button><button data-event-opts="{{[['tap',[['closeAiPanel',['$event']]]]]}}" class="btn primary data-v-14fdb568" bindtap="__e">å®Œæˆ</button></view></view></view></block></view>